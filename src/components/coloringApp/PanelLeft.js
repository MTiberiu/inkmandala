import React from "react";
import printJS from "print-js";
const PanelLeft = ({ onClickClosePage }) => {
  function closePageHadler() {
    onClickClosePage();
    document.body.style.overflow = "visible";
  }
  function printPage() {
    return printJS({
      printable: "svg",
      type: "html",
      targetStyles: ["*"],
      scanStyles: false,
      style:
        "svg {position:absolute; top:0; bottom:0; left:0;} @page { size: A4 portrait; }",
    });
  }

  function downloadSVG() {
    let selectedSvg = JSON.stringify(
      document.querySelector("#svg svg ").outerHTML
    );
    selectedSvg = selectedSvg.replace(/\\n/g, "");
    selectedSvg = selectedSvg.replace(/\\/g, "");
    let result = selectedSvg.slice(1, -1);
    const a = document.createElement("a");

    a.href = `data:image/svg+xml;utf8,${result}`;
    a.download = `downloadSVG.svg`;
    a.click();
  }

  function svg2img() {
    let itm = JSON.stringify(document.querySelector("#svg svg ").outerHTML);
    itm = itm.replace(/\\n/g, "");
    itm = itm.replace(/\\/g, "");
    const result = itm.slice(1, -1);

    const svg64 = btoa(result); //for utf8: btoa(unescape(encodeURIComponent(xml)))
    const b64start = "data:image/svg+xml;base64,";
    const image64 = b64start + svg64;
    const canvas = document.querySelector("canvas");
    canvas.width = 800;
    canvas.height = 800;
    const context = canvas.getContext("2d");

    const image = new Image();
    image.src = image64;
    image.onload = function () {
      context.drawImage(image, 0, 0);
      const a = document.createElement("a");
      a.download = `downloadPNG.png`;
      a.href = canvas.toDataURL("image/png");
      a.click();
    };
  }

  return (
    <div className="panel left">
      <div className="menu title">Discover more designs</div>
      <div className="menu close" onClick={closePageHadler}>
        <svg width="100%" height="100%" viewBox="0 0 12 12">
          <g transform="matrix(1,0,0,1,-280.659,-267.347)">
            <g transform="matrix(0.82758,-0.82758,0.82758,0.82758,-211.086,328.084)">
              <path
                fill-rule="evenodd"
                d="M333.126,269.781C331.286,269.463 329.885,267.859 329.885,265.929C329.885,263.772 331.636,262.02 333.794,262.02C335.951,262.02 337.703,263.772 337.703,265.929C337.703,267.859 336.301,269.463 334.462,269.781C334.465,269.803 334.467,269.825 334.467,269.848C334.467,270.819 334.467,272.991 334.467,273.962C334.467,274.23 334.249,274.448 333.981,274.448C333.859,274.448 333.729,274.448 333.607,274.448C333.338,274.448 333.121,274.23 333.121,273.962C333.121,272.991 333.121,270.819 333.121,269.848C333.121,269.825 333.122,269.803 333.126,269.781ZM333.794,263.166C335.319,263.166 336.557,264.404 336.557,265.929C336.557,267.454 335.319,268.693 333.794,268.693C332.269,268.693 331.03,267.454 331.03,265.929C331.03,264.404 332.269,263.166 333.794,263.166Z"
              />
            </g>
          </g>
        </svg>
        Discover
      </div>
      <div className="menu title">Print the design</div>
      <div className="menu close" onClick={printPage}>
        <svg width="100%" height="100%" viewBox="0 0 12 13">
          <path
            fill-rule="evenodd"
            d="M6.329,0l2.384,2.595l-0.039,-0l-0,0.486l0.941,0c0.484,0 0.949,0.193 1.291,0.535c0.343,0.343 0.535,0.807 0.535,1.292l0,4.587c0,0.277 -0.224,0.5 -0.5,0.5l-2.267,0l-0,1.664c-0,0.277 -0.224,0.5 -0.5,0.5l-4.907,0c-0.276,0 -0.5,-0.223 -0.5,-0.5l0,-1.664l-2.267,0c-0.276,0 -0.5,-0.223 -0.5,-0.5c0,0 0,-2.844 0,-4.587c-0,-0.485 0.192,-0.949 0.535,-1.292c0.343,-0.342 0.807,-0.535 1.292,-0.535l0.94,0l0,-2.581c0,-0.276 0.224,-0.5 0.5,-0.5l3.062,-0Zm1.345,9.995l-0,1.164c-0,0 -3.907,0 -3.907,0c0,0 0,-1.164 0,-1.164c0,0 3.907,0 3.907,0Zm2.767,-5.087l0,4.087c0,0 -9.441,0 -9.441,0c0,0 0,-4.087 0,-4.087c-0,-0.219 0.087,-0.43 0.242,-0.585c0.155,-0.155 0.365,-0.242 0.585,-0.242c-0,0 7.788,0 7.788,0c0.219,0 0.429,0.087 0.584,0.242c0.155,0.155 0.242,0.366 0.242,0.585Zm-1.842,2.251l-6.049,-0l-0,1.005l6.049,-0l-0,-1.005Zm-6.049,-2.105c0.341,-0 0.617,0.276 0.617,0.617c0,0.341 -0.276,0.617 -0.617,0.617c-0.341,0 -0.617,-0.276 -0.617,-0.617c-0,-0.341 0.276,-0.617 0.617,-0.617Zm1.678,-0c0.341,-0 0.618,0.276 0.618,0.617c-0,0.341 -0.277,0.617 -0.618,0.617c-0.34,0 -0.617,-0.276 -0.617,-0.617c-0,-0.341 0.277,-0.617 0.617,-0.617Zm2.101,-4.054l0,1.595l1.345,-0l-0,0.486l-3.907,0c0,0 0,-2.081 0,-2.081l2.562,0Z"
          />
        </svg>
        Print
      </div>
      <div className="menu title">Download</div>
      <div className="download">
        <div className="menu close" onClick={svg2img}>
          <svg width="100%" height="100%" viewBox="0 0 12 14">
            <g transform="matrix(1,0,0,1,-266.119,-266.036)">
              <path
                fill-rule="evenodd"
                d="M267.386,269.96L266.822,269.96C266.636,269.96 266.457,270.034 266.325,270.166C266.193,270.298 266.119,270.477 266.119,270.663C266.119,271.833 266.119,274.167 266.119,275.337C266.119,275.524 266.193,275.702 266.325,275.834C266.457,275.966 266.636,276.04 266.822,276.04L267.386,276.04L267.386,278.76C267.386,279.036 267.61,279.26 267.886,279.26L276.298,279.26C276.574,279.26 276.798,279.036 276.798,278.76L276.798,276.04L277.362,276.04C277.548,276.04 277.727,275.966 277.859,275.834C277.99,275.702 278.065,275.524 278.065,275.337C278.065,274.167 278.065,271.833 278.065,270.663C278.065,270.477 277.99,270.298 277.859,270.166C277.727,270.034 277.548,269.96 277.362,269.96L276.798,269.96L276.797,268.612C276.792,268.504 276.752,268.404 276.689,268.325L276.644,268.275L274.435,266.156C274.354,266.087 274.251,266.043 274.137,266.037L274.114,266.036L267.886,266.036C267.61,266.036 267.386,266.26 267.386,266.536L267.386,269.96ZM275.798,276.04L275.798,278.26C275.798,278.26 268.386,278.26 268.386,278.26L268.386,276.04L275.798,276.04ZM275.539,273.431C275.408,273.431 275.302,273.325 275.302,273.194C275.302,273.169 275.302,273.144 275.302,273.119C275.302,272.988 275.408,272.882 275.539,272.882C275.801,272.882 276.221,272.882 276.483,272.882C276.546,272.882 276.606,272.907 276.651,272.952C276.695,272.996 276.72,273.056 276.72,273.119C276.72,273.494 276.72,274.18 276.72,274.18C276.582,274.314 276.383,274.431 276.121,274.532C275.86,274.634 275.595,274.685 275.327,274.685C274.986,274.685 274.689,274.613 274.435,274.47C274.182,274.327 273.992,274.123 273.864,273.857C273.737,273.591 273.673,273.302 273.673,272.989C273.673,272.65 273.744,272.348 273.887,272.084C274.029,271.821 274.237,271.618 274.511,271.478C274.72,271.37 274.98,271.316 275.291,271.316C275.696,271.316 276.012,271.4 276.239,271.57C276.389,271.682 276.504,271.822 276.584,271.991C276.614,272.056 276.613,272.131 276.58,272.195C276.547,272.259 276.487,272.304 276.416,272.317C276.347,272.335 276.273,272.349 276.208,272.361C276.108,272.38 276.006,272.331 275.957,272.241C275.913,272.151 275.848,272.077 275.766,272.017C275.639,271.924 275.481,271.878 275.291,271.878C275.004,271.878 274.775,271.969 274.606,272.151C274.436,272.333 274.351,272.604 274.351,272.962C274.351,273.349 274.437,273.639 274.609,273.832C274.781,274.026 275.006,274.122 275.284,274.122C275.422,274.122 275.56,274.095 275.699,274.041C275.837,273.987 275.956,273.922 276.056,273.845L276.056,273.431C276.054,273.431 275.759,273.431 275.539,273.431ZM270.743,274.629C270.68,274.629 270.62,274.604 270.576,274.56C270.531,274.515 270.506,274.455 270.506,274.392C270.506,273.791 270.506,272.209 270.506,271.608C270.506,271.545 270.531,271.485 270.576,271.44C270.62,271.396 270.68,271.371 270.743,271.371C270.835,271.371 270.936,271.371 271.014,271.371C271.096,271.371 271.173,271.414 271.216,271.484C271.367,271.732 271.739,272.339 272.041,272.831C272.096,272.921 272.205,272.964 272.307,272.935C272.409,272.906 272.48,272.813 272.48,272.707C272.48,272.312 272.48,271.871 272.48,271.608C272.48,271.477 272.586,271.371 272.717,271.371C272.762,271.371 272.809,271.371 272.854,271.371C272.917,271.371 272.977,271.396 273.022,271.44C273.066,271.485 273.091,271.545 273.091,271.608C273.091,272.209 273.091,273.791 273.091,274.392C273.091,274.523 272.985,274.629 272.854,274.629C272.756,274.629 272.646,274.629 272.563,274.629C272.481,274.629 272.405,274.587 272.361,274.517C272.212,274.276 271.851,273.691 271.556,273.214C271.5,273.124 271.391,273.081 271.29,273.11C271.188,273.139 271.117,273.232 271.117,273.338C271.117,273.717 271.117,274.137 271.117,274.392C271.117,274.523 271.011,274.629 270.881,274.629C270.835,274.629 270.788,274.629 270.743,274.629ZM267.701,274.629C267.57,274.629 267.464,274.523 267.464,274.392C267.464,273.791 267.464,272.209 267.464,271.608C267.464,271.545 267.489,271.485 267.533,271.44C267.578,271.396 267.638,271.371 267.701,271.371C268.012,271.371 268.519,271.371 268.519,271.371C268.919,271.371 269.18,271.387 269.302,271.42C269.488,271.469 269.645,271.575 269.771,271.739C269.897,271.903 269.96,272.114 269.96,272.373C269.96,272.573 269.923,272.742 269.851,272.878C269.778,273.014 269.686,273.121 269.574,273.199C269.462,273.277 269.348,273.328 269.233,273.353C269.076,273.385 268.848,273.4 268.551,273.4L268.359,273.4C268.228,273.4 268.122,273.506 268.122,273.637C268.122,273.854 268.122,274.175 268.122,274.392C268.122,274.523 268.016,274.629 267.885,274.629C267.825,274.629 267.761,274.629 267.701,274.629ZM268.359,271.922C268.296,271.922 268.235,271.947 268.191,271.992C268.147,272.036 268.122,272.096 268.122,272.159C268.122,272.297 268.122,272.472 268.122,272.61C268.122,272.673 268.147,272.733 268.191,272.777C268.235,272.822 268.296,272.847 268.359,272.847C268.426,272.847 268.482,272.847 268.482,272.847C268.741,272.847 268.914,272.83 269.002,272.796C269.089,272.762 269.158,272.708 269.207,272.636C269.257,272.563 269.282,272.479 269.282,272.382C269.282,272.264 269.247,272.166 269.177,272.089C269.108,272.012 269.019,271.964 268.913,271.944C268.834,271.93 268.677,271.922 268.439,271.922L268.359,271.922ZM268.386,269.96L268.386,267.036L273.61,267.036L273.61,268.636C273.61,268.912 273.834,269.136 274.11,269.136L275.798,269.136L275.798,269.96L268.386,269.96Z"
              />
            </g>
          </svg>
          PNG
        </div>
        <div className=" menu close" onClick={downloadSVG}>
          <svg width="100%" height="100%" viewBox="0 0 12 14">
            <g transform="matrix(1,0,0,1,-250.699,-266.036)">
              <path
                fill-rule="evenodd"
                d="M251.966,269.96L251.402,269.96C251.215,269.96 251.036,270.034 250.905,270.166C250.773,270.298 250.699,270.477 250.699,270.663C250.699,271.833 250.699,274.167 250.699,275.337C250.699,275.524 250.773,275.702 250.905,275.834C251.036,275.966 251.215,276.04 251.402,276.04L251.966,276.04L251.966,278.76C251.966,279.036 252.189,279.26 252.466,279.26L260.877,279.26C261.153,279.26 261.377,279.036 261.377,278.76L261.377,276.04L261.941,276.04C262.127,276.04 262.306,275.966 262.438,275.834C262.57,275.702 262.644,275.524 262.644,275.337C262.644,274.167 262.644,271.833 262.644,270.663C262.644,270.477 262.57,270.298 262.438,270.166C262.306,270.034 262.127,269.96 261.941,269.96L261.377,269.96L261.376,268.612C261.371,268.504 261.332,268.404 261.268,268.325L261.223,268.275L259.014,266.156C258.933,266.087 258.83,266.043 258.717,266.037L258.693,266.036L252.466,266.036C252.189,266.036 251.966,266.26 251.966,266.536L251.966,269.96ZM260.377,276.04L260.377,278.26C260.377,278.26 252.966,278.26 252.966,278.26L252.966,276.04L260.377,276.04ZM251.884,273.816C251.855,273.732 251.865,273.639 251.913,273.564C251.961,273.49 252.041,273.441 252.129,273.432C252.167,273.421 252.206,273.418 252.243,273.414C252.374,273.401 252.498,273.477 252.546,273.6C252.587,273.725 252.651,273.822 252.734,273.893C252.859,274 253.027,274.053 253.239,274.053C253.464,274.053 253.634,274.006 253.748,273.91C253.862,273.815 253.918,273.704 253.918,273.577C253.918,273.495 253.895,273.425 253.847,273.368C253.799,273.311 253.715,273.261 253.595,273.218C253.514,273.19 253.327,273.14 253.037,273.067C252.663,272.975 252.4,272.861 252.249,272.726C252.037,272.535 251.931,272.304 251.931,272.03C251.931,271.854 251.981,271.689 252.081,271.536C252.18,271.383 252.324,271.266 252.512,271.186C252.7,271.106 252.927,271.066 253.192,271.066C253.626,271.066 253.953,271.161 254.172,271.351C254.292,271.455 254.381,271.579 254.439,271.722C254.475,271.808 254.466,271.906 254.416,271.985C254.366,272.063 254.28,272.112 254.187,272.117C254.139,272.129 254.09,272.131 254.044,272.133C253.923,272.138 253.811,272.069 253.762,271.959C253.734,271.872 253.687,271.807 253.627,271.76C253.529,271.682 253.382,271.643 253.185,271.643C252.982,271.643 252.824,271.685 252.709,271.768C252.635,271.822 252.598,271.893 252.598,271.983C252.598,272.065 252.633,272.135 252.702,272.193C252.79,272.267 253.004,272.344 253.343,272.424C253.683,272.504 253.934,272.587 254.097,272.673C254.259,272.758 254.387,272.875 254.478,273.024C254.57,273.172 254.616,273.356 254.616,273.574C254.616,273.772 254.561,273.958 254.451,274.131C254.341,274.304 254.186,274.432 253.985,274.516C253.783,274.6 253.533,274.643 253.232,274.643C252.795,274.643 252.46,274.542 252.226,274.34C252.07,274.206 251.956,274.031 251.884,273.816ZM260.323,273.31C260.163,273.31 260.032,273.18 260.032,273.019C260.032,273.019 260.032,273.019 260.032,273.019C260.032,272.858 260.163,272.728 260.323,272.728C260.587,272.728 260.975,272.728 261.24,272.728C261.404,272.728 261.537,272.861 261.537,273.024C261.537,273.317 261.537,273.753 261.537,273.97C261.537,274.061 261.496,274.146 261.426,274.202C261.289,274.303 261.114,274.396 260.901,274.479C260.624,274.586 260.343,274.64 260.058,274.64C259.697,274.64 259.382,274.564 259.113,274.413C258.844,274.261 258.642,274.044 258.507,273.762C258.372,273.48 258.304,273.173 258.304,272.841C258.304,272.481 258.38,272.161 258.53,271.882C258.681,271.602 258.902,271.387 259.193,271.238C259.415,271.123 259.69,271.066 260.021,271.066C260.45,271.066 260.785,271.156 261.026,271.336C261.164,271.439 261.274,271.564 261.356,271.713C261.401,271.794 261.405,271.892 261.365,271.976C261.326,272.06 261.248,272.12 261.157,272.137C261.113,272.153 261.067,272.161 261.024,272.169C260.901,272.192 260.778,272.135 260.715,272.028C260.67,271.94 260.605,271.869 260.524,271.81C260.39,271.711 260.222,271.662 260.021,271.662C259.716,271.662 259.473,271.759 259.293,271.952C259.113,272.146 259.023,272.432 259.023,272.813C259.023,273.223 259.114,273.531 259.297,273.736C259.479,273.941 259.718,274.044 260.013,274.044C260.16,274.044 260.306,274.015 260.453,273.958C260.6,273.9 260.726,273.831 260.832,273.749L260.832,273.351C260.83,273.31 260.551,273.31 260.323,273.31ZM256.356,274.581C256.194,274.581 256.049,274.479 255.994,274.326C255.781,273.729 255.248,272.237 254.991,271.521C254.959,271.43 254.973,271.329 255.028,271.25C255.084,271.172 255.174,271.125 255.271,271.125C255.313,271.125 255.356,271.125 255.395,271.125C255.522,271.125 255.634,271.205 255.675,271.325C255.814,271.731 256.131,272.657 256.323,273.221C256.346,273.287 256.409,273.332 256.48,273.332C256.55,273.331 256.613,273.286 256.635,273.219C256.821,272.657 257.126,271.735 257.261,271.328C257.301,271.207 257.414,271.125 257.542,271.125C257.576,271.125 257.611,271.125 257.647,271.125C257.744,271.125 257.834,271.172 257.89,271.25C257.945,271.329 257.959,271.43 257.926,271.521C257.67,272.238 257.135,273.73 256.922,274.327C256.867,274.479 256.722,274.581 256.56,274.581C256.493,274.581 256.422,274.581 256.356,274.581ZM252.966,269.96L252.966,267.036L258.189,267.036L258.189,268.636C258.189,268.912 258.413,269.136 258.689,269.136L260.377,269.136L260.377,269.96L252.966,269.96Z"
              />
            </g>
          </svg>
          SVG
        </div>
      </div>
      <div id="testul"></div>
    </div>
  );
};
export default PanelLeft;
